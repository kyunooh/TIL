# settings와 requirements 파일
세팅들은 서버가 시작될 때 적용되며 세팅값의 새로운 적용은 서버를 재시작해야만 가능하기 때문에 개발자들이 서비스 운영중에 임의로 변경할 수는 없게 되어 있다.
- 버전 컨트롤 시스템으로 모든 설정 파일을 관리해야 한다. # 이부분은 특히나 운영 환경에서 중요하다. 날짜, 시간 등 세팅 변화에 대한 기록이 반드시 문서화되어야 한다.
- 반복되는 설정들을 없애야 한다. # 세팅 파일 이곳저곳에서 복사 붙이기를 하기보다는 기본 세팅 파일로부터 상속을 통해 이용해야 한다.
- 암호나 비밀 키 등은 안전하게 보관해야 한다. # 이런 암호나 비밀 키 등 민감한 보안 관련 사항은 버전 컨트롤 시스템에서 제외해야 한다. 

## 버전 관리되지 않는 로컬 세팅은 피하도록 한다
그간 우리는 버전 관리되지 않는 local_settings를 안티 패턴 이라고 생각하지 않았지만, 현재는 권장 하지 않는다.
스테이징과 운영 서버에서는 비활성화되어 있거나 아예 설치조차 되어 있지 않은 디버그 도구에 대한 세팅 등이 그러한 예다.
게대가 때때로 퍼블릭이나 프라이빗 저장소에서 특정 설정 파일을 빼야만 할 경우가 있다. 우선 SECRET_KEY가 있다. 아마존 API 키, 스트라이프 API 키, 비밀번호 형태의 여러 설정 변수도 보안을 위해 저장소에서 빼야 한다.
local_settings 의 문제점
- 모든 머신에 버전 컨트롤에 기록되지 않는 코드가 존재한다.
운영 환경의 문제점을 로컬 환경에서 구현해보기 위해 머리털 한 움큼이 빠질 정도로 긴 시간을 허비한 후에야 해당 문제의 원인이 오직 운영환경에서만 일어나게 되어 있다는 사실을 발견하게 될 것이다.
- 로컬 환경에서 발견된 "버그"를 수정해서 운영 환경으로 푸시하고 났더니, 해당 버그의 문제점이 개발 환경에서 커스터마이징된 local_settings.py 모듈에 기인한 것임을 알아챌 때가 생길 것이다.
- 여러 팀원이 서로의 local_settings.py 를 복사해서 여기저기 불여 쓰기 시작한다면 이는 같은 일을 반복하지 말라는 규칙을 위반하는 것이다.
다른 방법을 이야기해 보면 개발 환경, 스테이징 환경, 테스트 환경, 운영 환경설정을 공통되는 객체로부터 상속 받아 구성된 서로 다른 세팅 파일로 나누어 버전 컨트롤 시스템에서 관리하는 것이다. 그런 다음에는 이러한 상태에서 서버의 암호 정보 등을 버전 컨트롤에서 빼서 비밀스럽게 유지하는 것이다.
## 여러 개의 settings 파일 이용하기
한 개의 settings.py 파일을 이용하기보다는 settings/ 디렉터리 아래에 여러개의 셋업 파일을 구성하여 이용한다. 일반적으로 settings/ 디렉터리는 다음과 같은 파일들을 가지고 있다.
- settings/
- - __init__.py
- - base.py # 프로젝트의 모든 인스턴스에 적용되는 공용 세팅 파일
- - local.py # 로컬 환경에서 작업할 때 쓰이는 파일이다. 디버그 모드, 로그 레벨, django-debug-toolbar 같은 도구 활성화 등이 설정되어 있는 개발 전용 로컬 파일이다. 때때로 개발자들은 이 파일을 dev.py로 수정해서 이용한다.
- - staging.py # 운영 환경 서버에서 (반쯤은)프라이빗 버전을 가지고 구동되는 스테이징 서버를 위한 파일, 운영 환경으로 코드가 완전히 이전되기 전에 관리자들과 고객들의 확인을 위한 시스템
- - test.py # 테스트 러너, 인메모리 데이터베이스 정의, 로그 세팅등을 포함한 테스트를 위한 세팅
- - production.py # 운영 서버에서 실제로 운영되는 세팅 파일이다. 이 파일에는 운영 서버에서만 필요한 설정이 들어 있다. prod.py라고 부르기도 한다.

설정해서 실행하는 방법
```shell
python manage.py shell --settings=twoscoops.settings.local
python manage.py runserver --settings=twoscoops.settings.local
```

### 개발 환경의 settings 파일 예제
콘솔 환경에서의 메일 성정, 프로젝트를 디버그 모드로 운영하는 설정, 그리고 여러 개발 환경에서만 적용이 필요한 설정들을 포함한 여러 설정 파일이 필요하다. 우리는 settings/local.py에 다음 과 같이 개발 환경을 설정했다.
(책을 참고 하자)
