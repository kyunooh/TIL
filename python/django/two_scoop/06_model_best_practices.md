# 장고에서 모델 이용하기
모델은 장고 프로젝트의 토대가 되는 부분이다. 깊은 고려 없이 성급하게 장고 모델을 작성하다 보면 어느 순간의 프로젝트가 막다른 길로 다가가고 있음을 경험하게 될 것이다.
새 모델을 추가하거나 기존 모델을 수정해야 할 때, 한 번 더 깊이 생각해 보고 프로젝트의 토대를 가능한 한 탄탄하고 안전하게 다질 수 있는 방향의 디자인을 고려해야 한다.

## 시작하기
### 모델이 너무 많으면 앱을 나눈다.
앱 하나에 모델이 스무 개 이상 있다면 앱이 너무 많은 일을 하고 있다는 증거다. 크기가 작은 앱으로 분리하는 것을 고려해야 할 것이다. 각 앱이 가진 모델수가 다섯개를 넘지 않는 게 좋다.

### 모델 상속에 주의하자
모델 상속은 장고에서는 상당히 까다로운 주제다. 장고는 세 가지 모델 상속 방법을 제공한다. 추상화 기초 클래스, 멀티테이블 상속, 프록시 모델 이다.
> 각각의 장단점은 책을 참고하자.

### 데이터베이스 마이그레이션
장고는 강력한 데이터베이스 마이그레이션 도구를 제공한다.
마이그레이션 팁
- 새로운 앱이나 모델이 생성되면 python manage.py makemigration로 migrations 를 실행!
- sqlmigrate 명령을 이용해 어떤 SQL문이 실행되는지도 확인하자.
- 자체적인 mirgations 스타일로 이루어지지 않은 외부 앱에 대해 마이그레이션을 처리할 때는 MIGRATIONS_MODULES 세팅을 이용한다.

> MIGRATIONS_MODULES 세팅이 뭐지??

- 생성되는 마이그레이션 개수가 너무 많아서 불편하다고 느낀다면 squashmigration를 한번 이용해보자!

마이그레이션의 배포와 관리는 다음과 같이 한다.
- 배포 전에 마이그레이션을 되돌릴 수 있는지 확인해 보자! 완벽한 복구가 아닌 적정 수준까지 되돌리기도 불가능하다면 규모가 큰 프로젝트에서는 버그 트래킹이나 배포시에 큰 문제가 될 수 있다.
- 테이블에 수백만 개의 데이터가 이미 존재한다면 운영 서버에서 실제로 마이그레이션을 실행하기 전에 스테이징 서버에서 비슷한 크기의 데이터에 대해 충분히 테스트한다. 운영 서버에서의 마이그레이션은 생각하는 것 보다 더 '많은' 시간이 걸린다
> 격하게 공감한다.
- MySQL을 이용한다면 다음과 같이 한다.
- - 이건 책을 참고 한다.
