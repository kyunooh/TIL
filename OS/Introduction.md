# 1.0 서론 요약
- 운영체제는 하드웨어를 관리하는 프로그램이다.
- 어떤 운영체제들은 일반이이 사용하기에 *편리하도록* 설계되었고, 일부는 *효율성*에 주안을 두고 설계되었다.

# 1.1 운영체제가 할 일
- 컴퓨터 시스템은 대개 네 가지 구성요소인 하드웨어, 운영체제, 응용프로그램 및 사용자로 구분할 수 있다.

## 1.1.1 사용자 관점(User View)
- 컴퓨터에 대한 사용자의 관점에 따라, 사용의 용이성에 초점을 맞추면, 자원의 이용에 비교적 덜 신경 쓰는 운영체제가 있다.

## 1.1.2 시스템 관점
- 컴퓨터의 관점에선 운영체제는 하드웨어와 가장 밀접하게 연결된 프로그램
- 따라서 운영체제를 자원 할당자로 볼 수 있다.
- 효율적인 자원 분배를 많이 신경쓴다.
- 운영체제는 특히 입출력 장치의 제어와 작동에 깊이 관여

## 1.1.3 운영체제의 정의
- 일반적으로 운영체제에 대한 완벽한 정의는 없음.
- 운영체제의 존재 이유가 유용한 컴퓨터 시시템을 만드는 과정에서 발생하는 문제점을 해결하기 위한 적절한 방법이기 때문
- 역사가 발전해가며, 운영체제는 점점 많은 기능을 제공 하게 됨

# 1.2 컴퓨터 시스템의 구성

## 1.2.1 컴퓨터 시스템 연산

- 현대의 범용 컴퓨터 시스템은 공유 메모리에 대한 접근을 제공하는 공통 버스에 의해 연결된 이러 개의 장치 제어기와 하나 이상의 CPU로 구성됨
- 컴퓨터가 구동하기 위해 수행할 초기 프로그램을 가져야 한다. 이게 보통 펌웨어로 알려진 그것. ROM에 저장된다. 시스템의 모든 면을 초기화 함
- 커널이 적재되고 수행이 시작되면 유저에게서비스를 제공 할 수 있다. 일부 서비스는 커널이 ㅇ닌 시스템 프로그램에 의해 제공되며, 부트시에 메ㅊ모리에 적재되어 시스템 프로세스나 시스템 디먼이 된다. 완전히 부트된 상태에선 이벤트 발생을 기다린다.
- 이벤트가 발생하면 인터럽트에 의해 신호가 보내어진다. 하드웨어는 어느 순간이든 시스템 버스를 통해 CPU에 신호를 보내 인터럽트를 발생시킬 수 있다.
- CPU가 인터럽트 되면 하던일을 중단하고, 즉시 고정된 위치로 실행을 옮긴다. 이런 고정된 위치는 일반적으로 인터럽트를 위한 서비스 루틴이 실행된다. 실행이 완료되면 CPU는 인터럽트 되었던 연산을 재개한다.
-  인터럽트는 컴퓨터 구조의 중요한 부분이다. 컴퓨터 설계마다 각자의 인터럽트 메커니즘을 가진다.

## 1.2.2 저장 장치 구조

- CPU는 명령어를 메모리로 부터 가져오므로, 프로그램이 반드시 메모리에 있어야 한다. 대부분의 프로그램을 RAM에서 가져온다.
- ROM은 부트스트랩 프로그램과 같은 정적 프로그램을 저장한다.
- 주 메모리는 모든 필요한 프로그램과 데이터를 영구히 저장하기에는 너무 작다.주 메모리는 휘발성 저장장치다. 이 두이유로 인해 프로그램이 메모리에 영구히 존재하는 건 불가능하다.
- (비휘발성 저장장치에 대해선 생략하겠다.)

## 1.2.3 입출력 구조(I/O Structure)
- 범용 컴퓨터 시스템은 여러개의 장치 제어기와 CPU들로 구성된다.
- 입출력 연산을 위해 디바이스 드라이버는 장치 제어기의 적절한 레지스터에 

# 1.3 컴퓨터 시스템 구조
컴퓨터 시스템은 사용된 범용 처리기의 수에 따라 분류 가능하다.

## 1.3.1 단일 처리기 시스템
최근까지 대부분의 시스템은 하나의 처리기를 사용했다. 단일 처리기 시스템은 사용자 프로세스의 명령어를 포함하여 범용 명령어 집합을 수행할 수 있는 하나의 주 CPU를 가진다. 또한 대부분의 시스템들이 특수 목적의 전용처리기를 가진다. 범용 CPU가 하나 있는 시스템은 단일 처리기 시스템이다.

## 1.3.2 다중 처리기 시스템
다중 처리기 시스템은 다음과 같은 세 가지 주요 장점을 갖는다.
1. 증가된 처리량: 처리기의 수를 증가시킴으로써 짧은 시간동안 더욱 많은 일을 수행시킨다. 하지만 오버헤드로 인해 증가율이 N배가 되진 않고, 그보다 적다.
2. 규모의 경제: 다중처리기는 여러개의 단일 시스템에 비해 비용을 절약할 수 있는데, 이는 처리기가 주변 장치, 대용량 저장 장치, 전원공급 장치를 공유하고 있기 때문이다.
3. 증가된 신뢰성: 만약 기능들이 적절하게 분산된다면 한 처리기가 고장 나더라도 시스템이 정지하는 것이 아니라 단지 속도만 느려지게 된다.

- 컴퓨터 시스템의 증가된 신뢰성은 많은 응용프로그램에게 필수적이다. 이렇게 살아남은 하드웨어의 수준에 비례해 계속적인 서비스를 제공하는 능력을 *우아한 퇴보*라고 한다.
- 어떤 시스템은 어느 한 구성요소의 고장에도 불구하고 동작을 계속할 수 있기 때문에 우아한 퇴보를 넘어 *결함 허용* 이라고 불리다. 결함 허용 시스템은 오류를 탐지하고 진단하고 가능하다면 교정할 수 있게 하는 기법이 필요하다는 사실을 주목하자.
- 어떤 시스템은 각 처리기에 특정 태스크가 할당되는 비대칭적 다중 처리를 사용한다. 하나의 주 처리기가 시스템을 제어한다. 다른 처리기들은 주 처리기의 명령을 수행하거나 미리 정의된 태스크를 수행한다.
- 가장 일반적인 다중 처리기 시스템은 각 처리기가 운영체제 내의 모든 작업을 수행하는 대칭적 다중 처리를 사용한다. 대칭적 다중 처리는 모든 처리기가 대등하다는 것을 의미한다.
- 하나의 칩에 여러개의 코어를 포함시키는 것을 멀티코어라 부른다. 멀티 코어는 단일 코어를 여러개 가지는 것보다 효율적인데, 이는 칩 내의 통신이 칩사이의 통신보다 빠르고, 단일 칩보다 전력을 훨씬 덜 소모한다.
- 마지막으로 블레이드 서버가 가장 최근에 개발된 형태이며 이 블레이드 서버는 다수의 처리기 보드 및 입출력 보드, 네트워킹 보드들이 하나의 섀시 안에 장착되는 형태를 가진다.

## 1.3.3 클러스터형 시스템 
- 여러 CPU를 가진 시스템의 또 다른 유형은 클러스터형 시스템이다. 클러스터 시스템은 둘 이상의 독자적 시스템 또는 노드들을 연결하여 구성한다는 점에서 다중 처리기 시스템과 차이가 난다. 그러한 시스템은 약결합이라고 간주된다. 각 노드는 단일 처리기 시스템 또는 멀티코어 시스템일 수 있다. 
- 클러스터링은 통상 높은 가용성을 제공하기 위해 사용된다. 즉, 클러스터 내 하나 이상의 컴퓨터 시스템이 고장 나더라도 서비스는 계속 제공된다. 일반적으로 고가용성 시스템에 중복 기능을 추가함으로써 얻어진다.
- 클러스터링은 비대칭 또는 대칭적으로 구성될 수 있다. 비대칭형 클러스터링에서는 다른 컴퓨터들이 응용 프로그램을 실행하는 동안 한 컴퓨터는 긴급 대기 모드 상태를 유지한다. 이 긴급 대기 모드의 호스트는 활성 서버들을 감시하는 작업만을 수행하다가, 서버가 고장 난다면 긴급 대기 모드의 호스트가 활성 서버가 된다. 대칭형 클러스터링에서는 둘 이상의 호스트들이 응용프로그램을 실행하고 서로를 감시한다. 가용한 하드웨어를 모두 사용하기 때문에 대칭형 구성이 더 효율적이다. 대칭형 구성이 효율적으로 동작하기 위해서는 하나 이상의 응용 프로그램들이 실행 가능해야 한다.
- 한 클러스터가 네트워크로 연결된 다수의 컴퓨터 시스템으로 구성되므로 클러스터는 고성능 계산환경을 제공하도록 할 수 있다. 이러한 시스템은 클러스터 내의 모든 큠퓨터에서 응용을 병렬 수행할 수 있으므로 단일 처리기나 SMP 시스템보다 훨씬 큰 계산 능력을 제공할 수 있다. 이는 병렬화라는 기법으로 프로그램을 클러스터의 각 컴퓨터에서 수행되는 분리된 요소로 나누는 작업을 말한다.
- 다른 형태의 클러스터로 병렬 클러스터와 WAN을 이용한 클러스터링이 있다.

# 1.4 운영체제의 구조
- 운영체제의 가장 중요한 면은 다중 프로그램을 할 수 있는 능력이다. 일반적으로 단일 사용자는 CPU 또는 입출력 장치를 항상 바쁘게 유지할 수 없다. 다중 프로그래밍은 CPU가 수행할 작업을 항상 하나 가지도록 작업을 구성함으로써 CPU 이용률을 증가시킨다. 
- 운영체제는 한 번에 여러 작업을 메모리에 적재한다. 이들 작업은 처음에는 디스크의 작업 풀 내에 유지된다. 왜냐하면 메모리 내에 동시에 저장할 수 있는 작업의 수는 통상 작업 풀에 둘 수 있는 작업의 수보다 훨씬 적기 때문이다. 작업 풀은 디스크 내의 모든 프로세스로 구성되며 이들은 주 메모리의 할당을 기다린다.
- 메모리 내의 작업 집합은 작업 풀 내의 작업들의 부분 집합이다. 운영체제는 메모리 내에 있는 작업중에 하나를 선택해 실행한다. 이 작업은 입출력의 종료를 기다리는 등과 같이 어떤일을 기다리게 된다.
- 비 다중 프로그래밍 시스템에서는 CPU가 쉬게 되지만, 다중 프로그래밍 시스템에서는 운영체제가 다른 적업으로 전환해 그 작업을 수행한다. 
- 다중 프로그래밍 시스템은 여러가지 시스템 자원을 효율적으로 이용할 수 있는 환경을 제공하지만, 사용자를 위해 컴퓨터 시스템과 상호 작용은 제공하지 않는다. 시분할 시스템에서는 CPU가 다수의 작업들을 교대로 수행하지만, 매우 빈번하게 교대가 일어나기 때문에 프로그램이 실행되는 동안에 사용자들은 각자 자기의 프로그램과 상호 작용할 수 있다.
- 시분할 시스템은 사용자와 시스템 간에 직접적인 통신을 제공하는 대화식 컴퓨터 시스템을 필요로 한다. 사용자는 키보드나 마우스 등과 같은 입력장치를 사용하여 운영체제나 프로그램에 직접 명령하고 출력장치의 즉각적인 응답을 기다린다. 따라서 응답 시간이 짧아야 하며, 보통 1초 이내이다.
- 시분할 운영체제는 동시에 많은 사용자가 컴퓨터를 공유하도록 한다. 시분할 시스템에서 각각의 동작이나 명령은 대체로 짧은 경향이 있기 때문에, 각 사용자는 단지 짧은 시간동안만 CPU 시간이 필요하다.
- 시분할 운영체제는 각 사용자에게 시분할 되는 컴퓨터의 작은 부분을 제공하기 위해 CPU 스케줄링과 다중프로그래밍을 사용한다. 각 사용자는 메모리에 최소한 하나의 독립된 프로그램을 가지고 있다. 메모리에 적재되어 있고, 실행되고 있는 프로그램을 일반적으로 프로세스라고 한다. 프로세스가 수행될 때는, 전형적으로 자신이 종료되거나 입출력을 수행할 필요가 있을 때까지 아주 짧은 시간 동안만 실행된다.

- 시분할과 다중 프로그래밍 운영체제에서는 여러 작업이 메모리에 동시에 유지되어야 한다. 몇몇 작업이 메모리로 옮겨올 준비가 되었고 , 그들 전부를 메모리에 보관할만한 공간이 불충분하다면, 시스템은 그들 중 몇 개를 선택해야 한다. 이러한 결정을 하는 것이 작업 스케줄링이다.
- 여러개의 작업이 동시에 실행 준비가 되어 있으면, 시스템은 그들 중 하나를 선택해야 한다. 이러한 결정을 내리는 것을 CPU 스케줄링이라고 한다.
- 시분할 시스템에서 운영체제는 적절한 응답 시간을 보장해야 한다. 이는 종종 스와핑에 의해 달성되는 데, 스와핑은 프로세스를 주 메모리에서 디스크로 적절하게 스왑인 또는 스왑아웃 시킨다.
- 합리적인 응답시간을 보장하는 더 일반적인 방법은 가상 메모리인데, 이것은 일부만 메모리에 있는 작업의 수행을 허용하는 기법이다. 이 기법의 이점은 물리메모리의 크기보다 더 커도 된다는 것이다. 주 메모리를 크고 균등한 저장 장치의 배열로 추상화하여, 사용자에게 보이는 논리 메모리를 물리 메모리로부터 분리시킨다. 이러한 기법은 프로그래머를 메모리 저장 장치의 한계로부터 자유롭게 해준다.
- 시분할 시스템은 반드시 파일 시스템도 제공해야한다. 파일 시스템은 다수의 디스크 상에 존재하므로, 디스크 관리 기법도 제공되어야 한다. 또한 시분할 시스템은 부적당한 사용으로부터 자원을 보호하기 위한 기법을 제공해야한다. 
- 작업 동기화와 통신기법을 제공해야하며, 교착상태에 빠지지 않도록 해야한다.


# 1.5 운영체제 연산 
- 운영체제는 인터럽트 구동식이다. 사건은 거의 항상 인터럽트나 트랩을 발생시켜 신호를 보낸다. 트랩은 오류, 혹은 운영체제 서비스 수행 요청에 의휴 유발되는 소프트웨어에 의해 생성된 인터럽트이다. 
- 운영체제와 사용자는 컴퓨터 시스템의 하드웨어와 소프트웨어 자원을 공유하기 때문에, 사용자 프로그램의 오류가 현재 수행중인 프로그램에만 문제를 일으키도록 보장해야 한다.
## 1.5.1 이중 연산 모드
- 운영체제의 적절한 동작을 보장하기 위해, 운영체제 코드의 실행과 사용자 정의 코드의 실행을 구분할 수 있어야 한다.
- 적어도 두 개의 독립된 연산  즉 사용자 모드와 커널모드를 필요로  모드 비트라고 하는 하나의 비트가 현재의 모드를 나타내기 위해컴퓨터의 하드웨어에 추가되었다. 이 비트는 커널 모드 또는 사용자 모드를 나타낸다. 모드비트의 사용으로 응용프로그램을 실행하는 것과 서비스를 요청하는 모드를 분리할 수 있다.
시스템  하드웨어는 커널 모드에서  이어 운영체제가 적재되고 사용자 모드에서 사용자 프로세스가  
- 이중모드는 잘못된 사용자로부터 운영체제와 그리고 잘못된 사용자 서로를 보호하는 방법을 제공한다.
- 일부 명령을 특권 명령으로 지정함으로써 이러한 보호를 달성한다.


## 1.2.2 저장 장치 구조 
